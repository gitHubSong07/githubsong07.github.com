<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>WEB前端</title>
    <link rel="icon" href="assets/img/icon/favicon.ico">
    <meta name="keywords" content="your keywords">
    <meta name="description" content="your description">
    <meta name="author" content="author,email address">

    <link rel="stylesheet" href="assets/lib/bootstrap.css">
    <link rel="stylesheet" href="assets/lib/Font-Awesome-3.2.1/css/font-awesome.css">
    <!--[if IE 7]>
    <link rel="stylesheet" href="assets/lib/Font-Awesome-3.2.1/css/font-awesome-ie7.min.css">
    <![endif]-->
    <link rel="stylesheet" href="assets/css/index.css">
</head>
<body>

      <header class="header jumbotron">
      <div class="container">
          <h1>WEB前端</h1>
          <p>HTML、CSS、javascript、jquery等前端学习资源 <br>
             <span class="package-amount">文章数量：234</span>
          </p>
          <form class="" role="search">
              <div id="search-form" class="form-group">
                  <input type="text" class="form-control search clearable" placeholder="搜索前端文章，例如：jquery">
                  <!--<i class="fa fa-search"></i>-->
                  <i class=" icon-search"></i>
              </div>
          </form>
          </div>
      </header>
      <div class="col-xs-12">
          <div class="container">
                  <form class="form-inline ">
                      <label>选择文章分类：</label><div class="btn-group" data-toggle="buttons">
                      <label class="btn btn-default active"><input type="radio" name="options"  data-categories="0">所有</label>
                      <label class="btn btn-default"><input type="radio" name="options"  data-categories="4">html/css</label>
                      <label class="btn btn-default "><input type="radio" name="options"  data-categories="2">Jquery</label>
                      <label class="btn btn-default"><input type="radio" name="options"  data-categories="1">Javascript </label></div>
                  </form>
          </div>
      </div>
      <div class="col-xs-12">
         <div id="article" class="container">
       <!--      <a href="/bootstrap/" class="package list-group-item">
                 <div class="row">
                     <div class="col-md-3">
                         <h4 class="package-name">bootstrap</h4>
                     </div>
                     <div class="col-md-9 ">
                         <p class="package-description">The most popular front-end framework for developing responsive, mobile first projects on the web.</p>
                     </div>
                  &lt;!&ndash;   <div class="package-extra-info col-md-9 col-md-offset-3 col-xs-12">
                         <span><i class="fa fa-star"></i> 102951</span>
                     </div>&ndash;&gt;
                 </div>
             </a>-->

         </div>
      </div>






      <script src="assets/lib/jquery-1.9.1.js"></script>
      <script src="assets/js/config.js"></script>
   <script>
   $(function() {
       updateData(0); //首次进入更新数据
       tabSwitch();  //分类切换

       $('.icon-search').on('click', function(){
           var searchKey = $('.search').val().trim();
           if( searchKey){
               searchAirticles( searchKey); //搜索
           }else{
               alert('请输入查询关键字后搜索');
           }
       })




   })
   //搜索入口
   function  searchAirticles( searchKeys){
       console.log('查询关键字为：'+ searchKeys );
       var articles = $data$.articles;
       var htmlStr = "";
       for (item in articles){
           var regx = searchKeys;
           var re  = new RegExp(regx)
           console.log('reg:'+ re);
           if(re.test(articles[item].title)||re.test(articles[item].description)){
             htmlStr += addData( articles[item]);
           }
       }
       $('#article').html(htmlStr);
   }
   function tabSwitch(){//分类切换
       var $radio = $('.form-inline').find('input[name="options"]');
       $radio.on('change', function (i, t) {
           //console.log('===:' + $(this).attr('data-categories'));
           updateData($(this).attr('data-categories'));

           var $parentLabel = $(this).parent('label');
           $parentLabel.addClass('active');
           $parentLabel.siblings('label').removeClass('active');
       })
   }    //分类切换
   function updateData(type) {

           var htmlStr = "";
           var acount = 0;
           var articles = $data$.articles;
           for (item in articles){
               if (type == 0) {
                   acount++;
                   htmlStr += addData(articles[item]);
               }else{
                   articles[item].categories.split('|').map(function(data){ //console.log('data:'+ data);
                       if(data==type){
                          acount++;
                          htmlStr += addData(articles[item]);
                       }
                   })
               }
               $('.package-amount').text('文章数量：'+acount);
               $('#article').html(htmlStr);
            }
       } /*updateData()*/
   function addData( item){
       return  '<a href="' + item.href + '" class="package list-group-item">'
               + '<div class="row">'
               + '<div class="col-md-3">'
               + '<h4 class="package-name">' + item.title + '</h4>'
               + '</div>'
               + '<div class="col-md-9 ">'
               + '<p class="package-description">' + item.description + '</p>'
               + '</div>'
               + '</div>'
               + '</a>';
   } /*addData()*/

   </script>
</body>
</html>
